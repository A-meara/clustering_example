## largely as in https://github.com/easybuilders/easybuild-easyconfigs/commit/e9a36171c68414f933ab1afa03b32422491f0f96#diff-3f2a92ab6ab59ddaccf4bc61b59bdd3f6717b95fd019131a57f51eefc831a699
## Caution boost easyconfig needs update  https://raw.githubusercontent.com/easybuilders/easybuild-easyconfigs/refs/heads/develop/easybuild/easyconfigs/b/Boost/Boost-1.82.0-GCC-12.3.0.eb (https://github.com/easybuilders/easybuild-easyconfigs/commit/e29210626f076e3a207f1abf3759ea124e28f8b2)

easyblock = 'Bundle'

name = 'fcps'
version = '1.3.4'
versionsuffix = '-r-%(rver)s'

homepage = 'https://bioconductor.org'
description = """Omnibenchmark clustering example FCPS deps."""

toolchain = {'name': 'foss', 'version': '2023a'}

builddependencies = [('pkgconf', '1.9.5')]

dependencies = [
    ('R', '4.3.2'),
    ('Boost', '1.82.0'), 
    ('GSL', '2.7'),
#    ('arrow-R', '14.0.1', versionsuffix),  # required by RcisTarget
]

exts_default_options = {
    'source_urls': [
        'https://bioconductor.org/packages/3.18/bioc/src/contrib/',
        'https://bioconductor.org/packages/3.18/bioc/src/contrib/Archive/%(name)s',
        'https://bioconductor.org/packages/3.18/data/annotation/src/contrib/',
        'https://bioconductor.org/packages/3.18/data/experiment/src/contrib/',
        'https://cran.r-project.org/src/contrib/Archive/%(name)s',  # package archive
        'https://cran.r-project.org/src/contrib/',  # current version of packages
        'https://cran.freestatistics.org/src/contrib',  # mirror alternative for current packages
    ],
    'sources': ['%(name)s_%(version)s.tar.gz'],
}

exts_defaultclass = 'RPackage'

# check whether correct version is installed in extension filter
# (some versions in this bundle may be newer than the ones provided by R)
local_ext_version_check = "pkgver = packageVersion('%(ext_name)s'); if (pkgver != '%(ext_version)s') "
local_stop_msg = "stop('%(ext_name)s %(ext_version)s not installed, found ', pkgver, ' instead')"
exts_filter = ("R -q --no-save", "%s { %s }" % (local_ext_version_check, local_stop_msg))

# BioC/CRAN packages, order of packages is important !!
exts_list = [
    ('BiocGenerics', '0.48.0', {
        'checksums': ['f413b2a812c5cbb219fc799d04fe36e4c88faa7ff946f643afcf5fdba312e44f'],
    }),
    ('Biobase', '2.62.0', {
        'checksums': ['ef753acc499c2504e226bf76e0acc08b7aa370fc60cc369bb8ebc1913f57d37e'],
    }),
    ('S4Vectors', '0.40.2', {
        'checksums': ['4cd9a63b3b41b08fca8121dc5b8f43d6f7d580842b1b000055dee90b68f49982'],
    }),
    ('gsl', '2.1-8', {
      'installopts': "--configure-args='--with-gsl=${EBROOTGSL} --enable-bundled-gsl=false'",
    }),
    ('boot', '1.3-31'),
    ('matrixStats', '1.4.1'),
    ('MatrixGenerics', '1.14.0', {
        'checksums': ['8da491661e8581adf1f2f8c5d2f46272d92b6c5a639bf4a80140c05e5694a593'],
    }),
    ('lattice', '0.22-6'),
    ('Matrix', '1.6-5'),
    ('generics', '0.1.3'),
    ('findpython', '1.0.9'),
    ('R6', '2.5.1'),
    ('jsonlite', '1.8.9'),
    ('argparse', '2.2.5'),
    ('gtable', '0.3.6'),
    ## ('isoband', '0.2.7'),
    ('MASS', '7.3-59'),
    ('nlme', '3.1-167'),
    ## ('mgcv', '1.9-1'),
    ## ('scales', '1.3.0'),
    ('tibble', '3.2.1'),
    ('vctrs', '0.6.5'),
    ('withr', '3.0.2'),
        ('RColorBrewer', '1.1-3', {
        'checksums': ['4f42f5423c45688b39f492c7892d93f37b4541831c8ffb140364d2bd89031ac0'],
    }),
    ('png', '0.1-8', {
        'checksums': ['5a36fabb6d62ba2533d3fc4cececd07891942cfb76fe689ec0d550d08762f61c'],
    }),
    ('jpeg', '0.1-10', {
        'checksums': ['c8d9f609c3088f91ec4853d6cc0e66511038a465811dea79ca6a0c09519178ca'],
    }),
    ('deldir', '2.0-4', {
        'checksums': ['d418acb28ec3707b6d64c7466d0cefbb49b098537f37558d8f7a5befd34a4653'],
    }),
    ('RcppEigen', '0.3.4.0.2', {
        'checksums': ['ecad7ba2129fd48b7ebb825558d38492ed1f3a8934959e27fcd6688175e542bb'],
    }),
    ('interp', '1.1-6', {
        'checksums': ['3674044e5334ecdf124054303929c084fc0797d3123e28576a230492ea6ecd34'],
    }),
    ('latticeExtra', '0.6-30', {
        'checksums': ['c550a76913624818482bf237d48883c58e368ba356ced8ed5e76146672279eed'],
    }),
    ('plyr', '1.8.9', {
        'checksums': ['15b5e7f711d53bf41b8687923983b8ef424563aa2f74c5195feb5b1df1aee103'],
    }),
    ('gtable', '0.3.6', {
        'checksums': ['d305a5fa11278b649d2d8edc5288bf28009be888a42be58ff8714018e49de0ef'],
    }),
    ('reshape2', '1.4.4', {
        'checksums': ['d88dcf9e2530fa9695fc57d0c78adfc5e361305fe8919fe09410b17da5ca12d8'],
    }),
    ('dichromat', '2.0-0.1', {
        'checksums': ['a10578e9ad8a581bd8fe0d8a8370051f3cdcf12c7d282f3af2a18dacda566081'],
    }),
    ('colorspace', '2.1-1', {
        'checksums': ['e721cee5f4d6e4b0fc8eb18265e316b4f856fd3be02f0775a26032663758cd0b'],
    }),
    ('munsell', '0.5.1', {
        'checksums': ['03a2fd9ac40766cded96dfe33b143d872d0aaa262a25482ce19161ca959429a6'],
    }),
    ('labeling', '0.4.3', {
        'checksums': ['c62f4fc2cc74377d7055903c5f1913b7295f7587456fe468592738a483e264f2'],
    }),
    ('viridisLite', '0.4.2', {
        'checksums': ['893f111d31deccd2cc959bc9db7ba2ce9020a2dd1b9c1c009587e449c4cce1a1'],
    }),
    ('farver', '2.1.2', {
        'checksums': ['528823b95daab4566137711f1c842027a952bea1b2ae6ff098e2ca512b17fe25'],
    }),
    ('scales', '1.3.0', {
        'checksums': ['b33e0f6b44259551ce02befd52eac53602509fbfdd903920620c658c50f35888'],
    }),
    ('zeallot', '0.1.0', {
        'checksums': ['439f1213c97c8ddef9a1e1499bdf81c2940859f78b76bc86ba476cebd88ba1e9'],
    }),
    ('assertthat', '0.2.1', {
        'checksums': ['85cf7fcc4753a8c86da9a6f454e46c2a58ffc70c4f47cac4d3e3bcefda2a9e9f'],
    }),
    ('lazyeval', '0.2.2', {
        'checksums': ['d6904112a21056222cfcd5eb8175a78aa063afe648a562d9c42c6b960a8820d4'],
    }),
    ('mgcv', '1.9-1', {
        'checksums': ['700fbc37bedd3a49505b9bc4949faee156d9cfb4f669d797d06a10a15a5bdb32'],
    }),
    ('isoband', '0.2.7', {
        'checksums': ['7693223343b45b86de2b5b638ff148f0dafa6d7b1237e822c5272902f79cdf61'],
    }),
    ('ggplot2', '3.5.1', {
        'checksums': ['7c58b424f99b3634038e6f6d1fe4b0241b8aecb50e9c50466d5590f7e3144721'],
    }),
    ('Rhdf5lib', '1.24.1', {
        ## 'patches': ['Rhdf5lib-1.20.0_fix_hardcoded_path_to_mv.patch'],
        ## 'checksums': [
        ##     {'Rhdf5lib_1.24.1.tar.gz': '90eb76a2f6b73e18c8fb560ab14e5e3a2c85ae747f278d66e67d3bebfe6c6551'},
        ##     {'Rhdf5lib-1.20.0_fix_hardcoded_path_to_mv.patch':
        ##      'fd35fd20166aa67cf5fbc194861d9196a2220fd40057b0524722ecc3de4774e8'},
        ## ],
    }),
    ('RProtoBufLib', '2.14.0', {
        ## 'patches': ['RProtoBufLib-2.8.0_fix-protobuf-build.patch'],
        ## 'checksums': [
        ##     {'RProtoBufLib_2.14.0.tar.gz': 'd8c0c6ced9ea9bb661288697fbbdb1ffb754dd8d2af85132b039fbe666242ac4'},
        ##     {'RProtoBufLib-2.8.0_fix-protobuf-build.patch':
        ##      '8775d74e2288000c57575f4ef45a875b4a377ac02f89efa947699ea786bedf64'},
        ## ],
    }),
    ('BH', '1.84.0-0', {
        'checksums': ['6fb660755f572cd975073d7052075654acf8db12d208954ca223b8e4f77ef1ac'],
    }),
    ('cytolib', '2.14.1', {
        'checksums': ['2e37fafbf76a16720fb9b5df611df77d511420fd1f2f11431d94b536d28c4fcd'],
    }),
    ('flowCore', '2.14.0', {
        'checksums': ['6d21a43022eb6de907fdc025116bccacbf2ee997c5cf7ad96d0f70fa6d605185'],
    }),
    ('cluster', '2.1.8'),   
    ('graph', '1.84.1'),
    ('mclust', '6.1.1'),
    ('flowClust', '3.40.0', {
        'installopts': "--configure-args='--with-gsl=${EBROOTGSL} --enable-bundled-gsl=false'",
        'checksums': ['7e699b06e378e32144704dbec18289109980b0f5eca166180f2c30007b83e0f5'],
    }),
    ('energy', '1.7-12', {
       'installopts': "--configure-args='--with-gsl=${EBROOTGSL} --enable-bundled-gsl=false'",
    }),
    ('dbscan', '1.2.2'),
    ('pixmap', '0.4-13', {
        'checksums': ['e3dbc641a0497575b45a4140dadc6bf43cdf39b02393f93f1b0ee4f4d026e711'],
    }),
    ('sp', '2.1-4', {
        'checksums': ['e185e7fb61d2d7dbc50fd765a93e170fa778083a653588db1f5e99d019479f0a'],
    }),
    ('pracma', '2.4.4'),
    ('RcppArmadillo', '14.0.2-1', {
        'checksums': ['e0755c37f1a70c4509df2a8f773db11418d9758ff81993f096f913d2116e04f5'],
    }),
    ('DataVisualizations', '1.3.3'),
    ('FCPS', '1.3.4'),

]

modextrapaths = {'R_LIBS_SITE': ''}

## sanity_check_paths = {
##     'files': [],
##     'dirs': ['AnnotationDbi', 'BiocManager', 'GenomicFeatures'],
## }

moduleclass = 'bio'